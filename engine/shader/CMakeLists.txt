set(TARGET_NAME ${SHADER_COMPILE_TARGET})

set(GENERATED_SHADER_FOLDER "generated")
if (NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${GENERATED_SHADER_FOLDER})
    file(MAKE_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${GENERATED_SHADER_FOLDER})
endif()

if (NOT EXISTS ${CMAKE_CURRENT_SOURCE_DIR}/${GENERATED_SHADER_FOLDER}/cpp)
    file(MAKE_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}/${GENERATED_SHADER_FOLDER}/cpp)
endif()

file(GLOB_RECURSE SHADER_FILES CONFIGURE_DEPENDS "${CMAKE_CURRENT_SOURCE_DIR}/build/glsl/*.vert" "${CMAKE_CURRENT_SOURCE_DIR}/build/glsl/*.frag")

include(${CMAKE_CURRENT_SOURCE_DIR}/cmake/shader_compile_glsl.cmake)
compile_shader(
    "${SHADER_FILES}"
    "${TARGET_NAME}"
    "${GENERATED_SHADER_FOLDER}")